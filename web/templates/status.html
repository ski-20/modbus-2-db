{% extends "base.html" %}
{% block content %}
<table class="table table-sm table-striped">
  <tbody>
    <tr><td>connected</td><td>{{ s.connected|default('') }}</td></tr>
    <tr><td>last_read_ok</td><td>{{ s.last_read_ok|default('') }}</td></tr>
    <tr><td>consecutive_errors</td><td>{{ s.consecutive_errors|default('') }}</td></tr>
    <tr><td>last_read_epoch</td><td>{{ s.last_read_epoch|default('') }}</td></tr>
    <tr><td>last_read_local</td><td>{{ s.last_read_epoch_local|default('') }}</td></tr>
    <tr><td>last_flush_epoch</td><td>{{ s.last_flush_epoch|default('') }}</td></tr>
    <tr><td>last_flush_local</td><td>{{ s.last_flush_epoch_local|default('') }}</td></tr>
    <tr><td>rows_written_last_flush</td><td>{{ s.rows_written_last_flush|default('') }}</td></tr>
  </tbody>
</table>
{% if storage %}
<hr>

<h5>Storage</h5>
<ul class="mb-2">
  <li>Used / Cap (MB): <strong>{{ storage.total_mb }}/{{ storage.cap_mb }}</strong> ({{ storage.pct_of_cap }}%)</li>
  <li>DB / WAL / SHM (MB): {{ storage.db_mb }} / {{ storage.wal_mb }} / {{ storage.shm_mb }}</li>
  <li>Auto-vacuum / Journal: {{ storage.auto_vacuum_label }} / {{ storage.journal_mode }}</li>
  <li>Pages / Free pages: {{ storage.page_count }} / {{ storage.freelist_count }}</li>
  <li>Rows (logs): {{ storage.row_count }}</li>
  <li>Oldest / Newest: {{ storage.min_ts or '—' }} / {{ storage.max_ts or '—' }}</li>
</ul>
{% endif %}
{% endblock %}
