{% extends "base.html" %}
{% block content %}
<table class="table table-sm table-striped">
  <tbody>
    <tr><td>connected</td><td>{{ s.connected|default('') }}</td></tr>
    <tr><td>last_read_ok</td><td>{{ s.last_read_ok|default('') }}</td></tr>
    <tr><td>consecutive_errors</td><td>{{ s.consecutive_errors|default('') }}</td></tr>
    <tr><td>last_read_epoch</td><td>{{ s.last_read_epoch|default('') }}</td></tr>
    <tr><td>last_read_local</td><td>{{ s.last_read_epoch_local|default('') }}</td></tr>
    <tr><td>last_flush_epoch</td><td>{{ s.last_flush_epoch|default('') }}</td></tr>
    <tr><td>last_flush_local</td><td>{{ s.last_flush_epoch_local|default('') }}</td></tr>
    <tr><td>rows_written_last_flush</td><td>{{ s.rows_written_last_flush|default('') }}</td></tr>
  </tbody>
</table>
{% if storage %}
<hr>

<h5>Storage</h5>
<table class="table table-sm table-striped">
  <tbody>
    <tr><td>Used / Cap (MB)</td><td>{{ storage.total_mb }}/{{ storage.cap_mb }} ({{ storage.pct_of_cap }}%)</td></tr>
    <tr><td>DB / WAL / SHM (MB)</td><td>{{ storage.db_mb }} / {{ storage.wal_mb }} / {{ storage.shm_mb }}</td></tr>
    <tr><td>Auto-vacuum / Journal</td><td>{{ storage.auto_vacuum_label }} / {{ storage.journal_mode }}</td></tr>
    <tr><td>Pages / Free pages</td><td>{{ storage.page_count }} / {{ storage.freelist_count }}</td></tr>
    <tr><td>Rows (logs)</td><td>{{ storage.row_count }}</td></tr>
    <tr><td>Oldest / Newest</td><td>{{ storage.min_ts or '—' }} / {{ storage.max_ts or '—' }}</td></tr>
  </tbody>
</table>
{% endif %}
{% endblock %}
